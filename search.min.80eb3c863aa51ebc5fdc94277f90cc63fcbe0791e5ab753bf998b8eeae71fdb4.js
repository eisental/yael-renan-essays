(function(){const input=document.querySelector("#book-search-input");const results=document.querySelector("#book-search-results");input.addEventListener("focus",init);input.addEventListener("keyup",search);function init(){input.removeEventListener("focus",init);input.required=true;loadScript("/lunr.min.js");loadScript("/search-data.min.d54c3bac628349f8377f2a9673a03026470068daa0d70a6f975b578309b0d144.js",function(){input.required=false;search();});}
function search(){while(results.firstChild){results.removeChild(results.firstChild);}
if(!input.value){return;}
const terms=lunr.tokenizer(input.value);const searchHits=window.bookSearch.idx.query(function(query){query.term(terms,{boost:100});query.term(terms,{boost:10,wildcard:lunr.Query.wildcard.LEADING|lunr.Query.wildcard.TRAILING});query.term(terms,{editDistance:2});});console.log(searchHits);searchHits.slice(0,10).forEach(function(hit){const page=window.bookSearch.pages[hit.ref];const li=document.createElement("li"),a=li.appendChild(document.createElement("a"));console.log(page.href);a.href=page.href;a.textContent=page.displayTitle;results.appendChild(li);});}
function loadScript(src,callback){const script=document.createElement("script");script.defer=true;script.async=false;script.src=src;script.onload=callback;document.head.append(script);}})();